global:
  imageTag: ""
  registry: "registry.digitalocean.com/dbr-cr"
  dbConnectionString: ""
  redisUrl: ""

directus:
  replicaCount: 2
  image:
    repository: "{{ .Values.global.registry }}/dbr-echo-directus"
    tag: "{{ .Values.global.imageTag }}"
  service:
    port: 8055
  env:
    SESSION_COOKIE_NAME: "dembrane_session_token_prod"
    PUBLIC_URL: "https://directus.echo.dembrane.eu"
    PORT: "8055"
    ADMIN_EMAIL: "admin@dembrane.com"
    WEBSOCKETS_ENABLED: "true"
    DB_CLIENT: "pg"
    DB_DATABASE: "dembrane"
    TELEMETRY: "false"
    REDIS_ENABLED: "true"
    CORS_ENABLED: "true"
    CORS_CREDENTIALS: "true"
    SESSION_COOKIE_SAME_SITE: "lax"
    SESSION_COOKIE_SECURE: "lax"
    EMAIL_TRANSPORT: "smtp"

apiServer:
  replicaCount: 1
  image:
    repository: "{{ .Values.global.registry }}/dbr-echo-server"
    tag: "{{ .Values.global.imageTag }}"
  service:
    port: 8000
  env:
    DIRECTUS_PUBLIC_URL: "https://directus.echo.dembrane.eu"
    ADMIN_BASE_URL: "https://dashboard.echo.dembrane.eu"
    PARTICIPANT_BASE_URL: "https://portal.echo.dembrane.eu"
    BUILD_VERSION: "{{ .Values.global.imageTag }}"
    DISABLE_REDACTION: "1"
    DISABLE_SENTRY: "0"
    SERVE_API_DOCS: "1"

worker:
  replicaCount: 1
  image:
    repository: "{{ .Values.global.registry }}/dbr-echo-server"
    tag: "{{ .Values.global.imageTag }}"
  env:
    DIRECTUS_PUBLIC_URL: "https://directus.echo.dembrane.eu"
    ADMIN_BASE_URL: "https://dashboard.echo.dembrane.eu"
    PARTICIPANT_BASE_URL: "https://portal.echo.dembrane.eu"
    BUILD_VERSION: "{{ .Values.global.imageTag }}"
    DISABLE_REDACTION: "1"
    DISABLE_SENTRY: "0"
    SERVE_API_DOCS: "0"

ingress:
  enabled: true
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
  hosts:
    directus: "directus.echo.dembrane.eu"
    api: "api.echo.dembrane.eu"
  tls:
    - secretName: "echo-tls"
      hosts:
        - "directus.echo.dembrane.eu"
        - "api.echo.dembrane.eu"
